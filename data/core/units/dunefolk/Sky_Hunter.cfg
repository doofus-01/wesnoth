#textdomain wesnoth-units

#define PATH_TEMP
units/dunefolk/skirmisher/#enddef

#define DIVERSION_ANIM_FILTER
    [filter]
        status=diversion
[/filter]#enddef

[unit_type]
    id=Dune Sky Hunter
    name= _ "female^Dune Sky Hunter"
    race=dunefolk
    gender=female
    image="{PATH_TEMP}sky_hunter.png"
    hitpoints=52
    movement_type=duneelusivefoot
    movement=6
    vision=10
    # This makes sense "physically", but might need adjustment for gameplay
    [vision_costs]
        cave=3
        shallow_water=1
        reef=1
        swamp_water=1
        sand=1
        deep_water=1
    [/vision_costs]
    experience=150
    level=3
    alignment=lawful
    advances_to=null
    {AMLA_DEFAULT}
    cost=45
    usage=mixed fighter
    description= _ "Handling birds of prey for use in a military role is something that takes great skill and training on the part of the handler, if not the bird.  Dune Sky Hunters are the elite of the Falconers, and have moved beyong the smaller, more common falcon, and now work with a type of large eagle usually called a desert eagle, but often mistaken for a young Roc.  In the wild, the eagles often feed on larger prey such as wolves, small horses, and, it is said, naughty young children.

Being larger and faster, the eagle can deliver a more powerful strike than the falcon can."
    {NOTE_SKIRMISHER}
    {NOTE_DIVERSION}
    die_sound={SOUND_LIST:HUMAN_FEMALE_DIE}
    {DEFENSE_ANIM_FILTERED "{PATH_TEMP}sky_hunter-eagle-defend2.png" "{PATH_TEMP}sky_hunter-eagle-defend1.png" {SOUND_LIST:HUMAN_FEMALE_HIT} (
    )}
    [defend]
        start_time=-126
        falcon_start_time=-126
        {DIVERSION_ANIM_FILTER}
        [frame]
            image="{PATH_TEMP}sky_hunter-alone-defend1.png:1,{PATH_TEMP}sky_hunter-alone-defend2.png:250,{PATH_TEMP}sky_hunter-alone-defend1.png:1"
        [/frame]
        [falcon_frame]
            image="{PATH_TEMP}eagle-hover[1,2,3,2,1].png:[1,80,90,80,1]"
            y=-38~-48:126,-48~-38:126
            offset=0~-0.3:126,-0.3~0:126
            auto_vflip=no
        [/falcon_frame]
        [if]
            hit_sound_start_time=-25
            hits=hit
            [hit_sound_frame]
                sound={SOUND_LIST:HUMAN_FEMALE_HIT}
            [/hit_sound_frame]
        [/if]
    [/defend]
    [abilities]
        {ABILITY_SKIRMISHER}
        {ABILITY_DIVERSION}
    [/abilities]
    [animation]
        apply_to=launching
        start_time=0
        falcon_start_time=0
        [frame]
            image="{PATH_TEMP}sky_hunter-launch[1~5].png:[200,170,120,80,80]"
        [/frame]
        [falcon_frame]
            image="misc/blank-hex.png:490,{PATH_TEMP}eagle-rise.png:160"
            auto_vflip=no
            y=-40:490,-40~-45:160
        [/falcon_frame]
    [/animation]
    [animation] # for now just the reverse of launching
        apply_to=landing
        start_time=0
        falcon_start_time=0
        [frame]
            image="{PATH_TEMP}sky_hunter-launch[5~1].png:[80,80,120,170,200]"
        [/frame]
        [falcon_frame]
            image="{PATH_TEMP}eagle-rise.png:160,misc/blank-hex.png:490"
            auto_vflip=no
            y=-45~-40:160,-40:490
        [/falcon_frame]
    [/animation]
    [standing_anim]
        start_time=0
        falcon_start_time=0
        [if]
            {DIVERSION_ANIM_FILTER}
            [frame]
                image="{PATH_TEMP}sky_hunter-alone.png:1200"
            [/frame]
            [falcon_frame]
                image="{PATH_TEMP}eagle-hover[1,2,3,2].png:300"
                x=-0~5:300,5~-5:600,-5~0:300
                y=-40~-45:600,-45~-40:600
                auto_vflip=no
            [/falcon_frame]
        [/if]
        [else]
            [frame]
                image="{PATH_TEMP}sky_hunter.png:200"
            [/frame]
        [/else]
    [/standing_anim]
    [movement_anim]
        start_time=0
        falcon_start_time=0
        [if]
            {DIVERSION_ANIM_FILTER}
            [frame]
                image="{PATH_TEMP}sky_hunter-alone.png:200"
            [/frame]
            [falcon_frame]
                image="{PATH_TEMP}eagle-hover[1,2,3,2].png:[50,50,50,50]"
                y=-40~-46:100,-46~-40:100
                auto_vflip=no
                offset="0~1:200,0~1:200,0~1:200,0~1:200,0~1:200,0~1:200,0~1:200,0~1:200,0~1:200,0~1:200"
            [/falcon_frame]
        [/if]
        [else]
            [frame]
                image="{PATH_TEMP}sky_hunter-move1.png:200"
            [/frame]
        [/else]
    [/movement_anim]

    [attack]
        name=sword
        description= _ "short sword"
        type=blade
        range=melee
        damage=6
        number=4
        icon=attacks/sword-human-short.png
    [/attack]
    # Maybe the bird should have some "marksman" ability, since it actively corrects its flight.
    # But we also have to account for the defender not being able to hurt the bird.
    # So, we can say that the bird only strikes if it is safe, and a defender on favorable terrain can scare the bird off more often
    [attack]
        name=falcon
        description= _ "eagle"
        type=blade
        range=ranged
        damage=17
        number=2
        icon=attacks/claws.png
    [/attack]

    [attack_anim]
        [filter_attack]
            name=sword
        [/filter_attack]
        start_time=-250
        falcon_start_time=-250
        [if]
            {DIVERSION_ANIM_FILTER}
            [frame]
                image="{PATH_TEMP}sky_hunter-alone.png:300"
            [/frame]
            [falcon_frame]
                image="{PATH_TEMP}eagle-hover.png:300"
                auto_vflip=no
                y=-45~-40:300
            [/falcon_frame]
        [/if]
        [else]
            [frame]
                image="{PATH_TEMP}sky_hunter.png:300"
            [/frame]
        [/else]
        {SOUND:HIT_AND_MISS {SOUND_LIST:SWORD_SWISH} {SOUND_LIST:MISS} -100}
    [/attack_anim]
    [attack_anim]
        [filter_attack]
            name=falcon
        [/filter_attack]
        start_time=-150
        missile_start_time=-150
        direction=nw,n,ne
        [if]
            hits=yes
            [missile_frame]
                image="{PATH_TEMP}eagle-n.png:300,{PATH_TEMP}eagle-n.png~FL(vert):400"
                image_diagonal="{PATH_TEMP}eagle-e.png:300,{PATH_TEMP}eagle-e.png~FL(horiz):400"
                y=-43~0:150,0~-43:150,-43:400
                auto_vflip=no
                offset=0~0.8:150,0.8~1.6:150,1.6~0:400
            [/missile_frame]
            [frame]
                image="{PATH_TEMP}sky_hunter-alone.png:700"
                sound=gryphon-shriek-1.ogg
            [/frame]
        [/if]
        [else]
            hits=no
            [missile_frame]
                image="{PATH_TEMP}falcon-n.png:300,{PATH_TEMP}eagle-n.png~FL(vert):400"
                image_diagonal="{PATH_TEMP}falcon-e.png:300,{PATH_TEMP}eagle-e.png~FL(horiz):400"
                auto_vflip=no
                y=-43~-56:150,-56:150,-56~-43:400
                offset=0~0.8:150,0.8~1.6:150,1.6~0:400
            [/missile_frame]
            [frame]
                image="{PATH_TEMP}sky_hunter-alone.png:700"
                sound=bat-flapping.wav
            [/frame]
        [/else]
    [/attack_anim]
    [attack_anim]
        [filter_attack]
            name=falcon
        [/filter_attack]
        start_time=-150
        missile_start_time=-150
        direction=sw,s,se
        [if]
            hits=yes
            [missile_frame]
                image="{PATH_TEMP}eagle-n.png~FL(vert):300,{PATH_TEMP}eagle-n.png:400"
                image_diagonal="{PATH_TEMP}eagle-e.png:300,{PATH_TEMP}eagle-e.png~FL(horiz):400"
                y=-43~0:150,0~-43:150,-43:400
                auto_vflip=no
                offset=0~0.8:150,0.8~1.6:150,1.6~0:400
            [/missile_frame]
            [frame]
                image="{PATH_TEMP}sky_hunter-alone.png:700"
                sound=gryphon-shriek-1.ogg
            [/frame]
        [/if]
        [else]
            hits=no
            [missile_frame]
                image="{PATH_TEMP}falcon-n.png~FL(vert):300,{PATH_TEMP}eagle-n.png:400"
                image_diagonal="{PATH_TEMP}falcon-e.png:300,{PATH_TEMP}eagle-e.png~FL(horiz):400"
                auto_vflip=no
                y=-43~-56:150,-56:150,-56~-43:400
                offset=0~0.8:150,0.8~1.6:150,1.6~0:400
            [/missile_frame]
            [frame]
                image="{PATH_TEMP}sky_hunter-alone.png:700"
                sound=bat-flapping.wav
            [/frame]
        [/else]
    [/attack_anim]
[/unit_type]

#undef PATH_TEMP
